main {
    max-width: 100%;
}
$col-gap-big: 0.225em;
$col-gap-mid: 0.475em;
$col-gap-smol: 1.575em;

@media only screen and (min-width: 55rem) {
    section.masonry {
        margin-inline: auto;
        max-width: 120rem;
    }
}

form {
    width: 100%;
    #images {
        padding-inline: 5em;
        width: auto;
        box-sizing: border-box;
        display: columns;
        columns: 3;
        column-gap: $col-gap-big;
        @media (max-width: 55rem) {
            padding-inline: $col-gap-mid;
            columns: 2;
            column-gap: 0.475em;
        }
        @media (max-width: 33rem) {
            padding-inline: $col-gap-smol;
            columns: 1;
            column-gap: 0.175em;
        }
        img {
            box-sizing: border-box;
            max-width: 100%;
            width: auto;
            height: auto;
            margin-inline: auto;
            border: 0.2ch solid var(--primary);
            //margin-block-end: calc($col-gap-big / 2);
            margin-block-end: 0;
            @media (max-width: 55rem) {
                margin-block-end: calc($col-gap-mid / 2);
            }
            @media (max-width: 33rem) {
                margin-block-end: calc($col-gap-smol / 2);
            }
        }
        .image-selection {
            input[type="radio"] {
                position: absolute;
                left: -100%;
                visibility: hidden;
            }
            label {
                isolation: isolate;
                position: relative;
                cursor: pointer;
                &:focus-within {
                    &::after,
                    &::before {
                        position: absolute;
                        content: " ";
                        left: unset;
                        right: 0;
                        bottom: unset;
                        border-radius: 0 0 0 100%;
                    }
                    &::before {
                        z-index: 1;
                        border: 0.675em solid var(--primary);
                    }
                    &::after {
                        z-index: 2;
                        border: 0.525em solid var(--secondary);
                    }
                }
            }
        }
        input[type="radio"]:checked ~ label {
            isolation: auto;
            img {
                visibility: visible;
                position: absolute;
                cursor: grab;
                margin-inline: auto;
                margin-block: auto;
                max-width: 45%;
                max-height: 70%;
                min-height: 10em;
                min-width: 10em;
                height: auto;
                width: auto;
                z-index: 101;
            }
        }
    }
    .comment {
        visibility: hidden;
        position: absolute;
        overflow-y: auto;
        z-index: -10;
        background: var(--primary);
        inset: 0;
    }
    &:has(input[type="radio"]:checked) {
        #images {
            visibility: hidden;
        }
        .comment {
            visibility: visible;
            z-index: 100;
            .comment-form {
                background: none;
                input[type="reset"] {
                    z-index: 102;
                }
            }
        }
    }
}

body:has(input[type="radio"]:checked) {
    overflow-y: hidden;
    main,
    nav,
    footer {
        visibility: hidden;
    }
}
